# üìä PROMPT: Indicadores Combinados - Estados + Opt-in/Opt-out

## üéØ **OBJETIVO**

Criar uma se√ß√£o de **indicadores visuais** na p√°gina de contatos combinando:
1. **üìç Distribui√ß√£o Geogr√°fica** (Estados)
2. **‚úÖ Taxa de Opt-in/Opt-out** (Compliance LGPD)

## üí° **CONCEITO**

Esses dois indicadores juntos mostram:
- **Geografia:** Onde est√£o seus contatos
- **Compliance:** Quantos podem receber campanhas

---

## üé® **LAYOUT PROPOSTO**

### **Op√ß√£o 1: Duas Colunas (Recomendado)** ‚≠ê

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [Stats linha 1: Total, Leads, Clientes, Opt-out]         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìç Distribui√ß√£o Geogr√°fica   ‚îÇ ‚úÖ Status de Consentimento  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 3 estados  2 sem UF          ‚îÇ 320 aptos   30 opt-out      ‚îÇ
‚îÇ                              ‚îÇ                             ‚îÇ
‚îÇ SP    150 (45%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë  ‚îÇ      [Gr√°fico Pizza]        ‚îÇ
‚îÇ RJ    100 (30%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ         91.4%               ‚îÇ
‚îÇ MG     50 (15%) ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ       opt-in                ‚îÇ
‚îÇ N/A    30 (9%)  ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ                             ‚îÇ
‚îÇ                              ‚îÇ  320 podem receber msgs     ‚îÇ
‚îÇ                              ‚îÇ  30 bloqueados (LGPD)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Op√ß√£o 2: Linha √önica com Cards** üé¥

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä INDICADORES DE BASE                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ ‚îÇ SP: 150  ‚îÇ ‚îÇ RJ: 100  ‚îÇ ‚îÇ MG: 50   ‚îÇ ‚îÇ 91% OK   ‚îÇ       ‚îÇ
‚îÇ ‚îÇ 45%      ‚îÇ ‚îÇ 30%      ‚îÇ ‚îÇ 15%      ‚îÇ ‚îÇ opt-in   ‚îÇ       ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Op√ß√£o 3: Card √önico Expandido** üìà

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä VIS√ÉO GERAL DA BASE                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Geogr√°fico                  ‚îÇ Consentimento                 ‚îÇ
‚îÇ ‚Ä¢ SP: 150 (45%)             ‚îÇ ‚Ä¢ ‚úÖ Opt-in: 320 (91.4%)     ‚îÇ
‚îÇ ‚Ä¢ RJ: 100 (30%)             ‚îÇ ‚Ä¢ ‚ùå Opt-out: 30 (8.6%)      ‚îÇ
‚îÇ ‚Ä¢ MG: 50 (15%)              ‚îÇ ‚Ä¢ ‚ö†Ô∏è  Pendente: 0 (0%)       ‚îÇ
‚îÇ ‚Ä¢ 3 estados ativos          ‚îÇ ‚Ä¢ üì© Aptos p/ campanha: 320  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìù **IMPLEMENTA√á√ÉO COMPLETA**

### **1. Adicionar fun√ß√µes helper para Opt-in/Opt-out**

```typescript
// Contatos que podem receber mensagens (opt-in)
const getOptInContacts = () => {
  return contacts.filter(c => !c.opted_out && c.is_active).length
}

// Contatos que N√ÉO podem receber mensagens (opt-out)
const getOptOutContacts = () => {
  return contacts.filter(c => c.opted_out).length
}

// Taxa de opt-in em %
const getOptInRate = () => {
  if (contacts.length === 0) return 0
  return ((getOptInContacts() / contacts.length) * 100).toFixed(1)
}

// Taxa de opt-out em %
const getOptOutRate = () => {
  if (contacts.length === 0) return 0
  return ((getOptOutContacts() / contacts.length) * 100).toFixed(1)
}

// Contatos inativos (n√£o est√£o opt-out mas est√£o inativos)
const getInactiveContacts = () => {
  return contacts.filter(c => !c.is_active && !c.opted_out).length
}
```

---

### **2. Layout Recomendado: Duas Colunas**

**Localiza√ß√£o:** Logo ap√≥s os stats atuais (ap√≥s linha 281)

```tsx
{/* Indicadores Avan√ßados */}
{contacts.length > 0 && (
  <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
    {/* Card 1: Distribui√ß√£o Geogr√°fica */}
    <Card className="p-4">
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-2">
          <span className="text-lg">üìç</span>
          <span className="text-sm font-semibold text-gray-700">
            Distribui√ß√£o Geogr√°fica
          </span>
        </div>
        <div className="flex items-center gap-2 text-xs">
          <span className="px-2 py-1 bg-blue-100 text-blue-700 rounded-full font-medium">
            {getUniqueStatesCount()} estados
          </span>
          {getContactsWithoutState() > 0 && (
            <span className="px-2 py-1 bg-amber-100 text-amber-700 rounded-full font-medium">
              {getContactsWithoutState()} sem UF
            </span>
          )}
        </div>
      </div>
      
      <div className="space-y-2.5">
        {getTopStates(6).map(([state, count]) => {
          const percentage = (count / contacts.length) * 100
          return (
            <div key={state}>
              <div className="flex items-center justify-between mb-1">
                <span className="text-sm font-medium text-gray-700 min-w-[60px]">
                  {state || 'N√£o informado'}
                </span>
                <span className="text-xs text-gray-500">
                  {count} ({percentage.toFixed(1)}%)
                </span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-2">
                <div
                  className={`h-2 rounded-full transition-all ${
                    state ? 'bg-blue-500' : 'bg-gray-400'
                  }`}
                  style={{ width: `${percentage}%` }}
                />
              </div>
            </div>
          )
        })}
      </div>
      
      {getUniqueStatesCount() > 6 && (
        <div className="mt-3 text-center text-xs text-gray-400">
          +{getUniqueStatesCount() - 6} outros estados
        </div>
      )}
    </Card>

    {/* Card 2: Status de Consentimento (Opt-in/Opt-out) */}
    <Card className="p-4">
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-2">
          <span className="text-lg">‚úÖ</span>
          <span className="text-sm font-semibold text-gray-700">
            Status de Consentimento
          </span>
        </div>
        <div className="text-xs text-gray-500">
          LGPD Compliance
        </div>
      </div>

      {/* Gr√°fico Pizza Visual */}
      <div className="flex items-center justify-center mb-4">
        <div className="relative w-32 h-32">
          {/* C√≠rculo base */}
          <svg className="w-32 h-32 transform -rotate-90">
            {/* Opt-out (vermelho) */}
            <circle
              cx="64"
              cy="64"
              r="56"
              fill="none"
              stroke="#FEE2E2"
              strokeWidth="16"
            />
            {/* Opt-in (verde) */}
            <circle
              cx="64"
              cy="64"
              r="56"
              fill="none"
              stroke="#10B981"
              strokeWidth="16"
              strokeDasharray={`${(getOptInRate() / 100) * 352} 352`}
              className="transition-all duration-500"
            />
          </svg>
          {/* Texto central */}
          <div className="absolute inset-0 flex flex-col items-center justify-center">
            <div className="text-2xl font-bold text-green-600">
              {getOptInRate()}%
            </div>
            <div className="text-xs text-gray-500">opt-in</div>
          </div>
        </div>
      </div>

      {/* Estat√≠sticas detalhadas */}
      <div className="space-y-2.5">
        <div className="flex items-center justify-between p-2.5 bg-green-50 rounded-lg">
          <div className="flex items-center gap-2">
            <div className="w-3 h-3 bg-green-500 rounded-full"></div>
            <span className="text-sm font-medium text-gray-700">Opt-in (Aptos)</span>
          </div>
          <span className="text-sm font-bold text-green-600">
            {getOptInContacts()} contatos
          </span>
        </div>

        <div className="flex items-center justify-between p-2.5 bg-red-50 rounded-lg">
          <div className="flex items-center gap-2">
            <div className="w-3 h-3 bg-red-500 rounded-full"></div>
            <span className="text-sm font-medium text-gray-700">Opt-out (Bloqueados)</span>
          </div>
          <span className="text-sm font-bold text-red-600">
            {getOptOutContacts()} contatos
          </span>
        </div>

        {getInactiveContacts() > 0 && (
          <div className="flex items-center justify-between p-2.5 bg-gray-50 rounded-lg">
            <div className="flex items-center gap-2">
              <div className="w-3 h-3 bg-gray-400 rounded-full"></div>
              <span className="text-sm font-medium text-gray-700">Inativos</span>
            </div>
            <span className="text-sm font-bold text-gray-600">
              {getInactiveContacts()} contatos
            </span>
          </div>
        )}
      </div>

      {/* Alerta de campanha */}
      <div className="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
        <div className="flex items-start gap-2">
          <span className="text-blue-600">üì©</span>
          <div className="flex-1">
            <div className="text-xs font-medium text-blue-900 mb-0.5">
              Audi√™ncia dispon√≠vel
            </div>
            <div className="text-xs text-blue-700">
              <span className="font-bold">{getOptInContacts()}</span> contatos podem 
              receber campanhas de WhatsApp
            </div>
          </div>
        </div>
      </div>
    </Card>
  </div>
)}
```

---

### **3. Vers√£o Simplificada (Card √önico)**

```tsx
{/* Indicadores Combinados - Vers√£o Simplificada */}
{contacts.length > 0 && (
  <Card className="p-4">
    <div className="flex items-center justify-between mb-4">
      <span className="text-sm font-semibold text-gray-700">
        üìä Vis√£o Geral da Base
      </span>
      <span className="text-xs text-gray-500">
        {contacts.length} contatos totais
      </span>
    </div>

    <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
      {/* Top Estados */}
      {getTopStates(3).map(([state, count]) => (
        <div key={state} className="text-center p-3 bg-gray-50 rounded-lg">
          <div className="text-xs text-gray-500 mb-1">üìç {state || 'N/A'}</div>
          <div className="text-lg font-bold text-gray-700">{count}</div>
        </div>
      ))}

      {/* Opt-in Status */}
      <div className="text-center p-3 bg-green-50 rounded-lg border border-green-200">
        <div className="text-xs text-green-700 mb-1">‚úÖ Opt-in</div>
        <div className="text-lg font-bold text-green-600">
          {getOptInRate()}%
        </div>
        <div className="text-xs text-green-600 mt-0.5">
          {getOptInContacts()} aptos
        </div>
      </div>
    </div>
  </Card>
)}
```

---

## üìä **M√âTRICAS DE OPT-IN/OUT**

### **Principais Indicadores:**

| M√©trica | Descri√ß√£o | C√°lculo |
|---------|-----------|---------|
| **Opt-in Total** | Contatos aptos para campanhas | `!opted_out && is_active` |
| **Opt-out Total** | Contatos bloqueados (LGPD) | `opted_out === true` |
| **Taxa Opt-in** | % da base que pode receber msgs | `(opt-in / total) * 100` |
| **Taxa Opt-out** | % da base bloqueada | `(opt-out / total) * 100` |
| **Audi√™ncia Dispon√≠vel** | Base real para campanhas | `opt-in count` |
| **Inativos** | Contatos n√£o opt-out mas inativos | `!opted_out && !is_active` |

---

## üé® **CORES E √çCONES**

```tsx
// Cores do tema
const STATUS_COLORS = {
  optIn: {
    bg: 'bg-green-50',
    text: 'text-green-600',
    border: 'border-green-200',
    progress: 'bg-green-500'
  },
  optOut: {
    bg: 'bg-red-50',
    text: 'text-red-600',
    border: 'border-red-200',
    progress: 'bg-red-500'
  },
  inactive: {
    bg: 'bg-gray-50',
    text: 'text-gray-600',
    border: 'border-gray-200',
    progress: 'bg-gray-400'
  }
}

// √çcones
const ICONS = {
  optIn: '‚úÖ',
  optOut: '‚ùå',
  inactive: '‚è∏Ô∏è',
  geography: 'üìç',
  campaign: 'üì©',
  compliance: 'üõ°Ô∏è'
}
```

---

## üßÆ **EXEMPLO DE C√ÅLCULOS**

```typescript
// Cen√°rio: 350 contatos totais
const contacts = [
  { opted_out: false, is_active: true },   // 320 desses
  { opted_out: true, is_active: false },   // 30 desses
  // ...
]

// Resultados:
getOptInContacts()    // 320
getOptOutContacts()   // 30
getOptInRate()        // "91.4"
getOptOutRate()       // "8.6"
getInactiveContacts() // 0

// Para campanhas:
// Audi√™ncia dispon√≠vel = 320 contatos (s√≥ esses podem receber msgs)
```

---

## ‚úÖ **CHECKLIST DE IMPLEMENTA√á√ÉO**

### **Parte 1: Fun√ß√µes Helper**
- [ ] `getOptInContacts()` - Conta aptos
- [ ] `getOptOutContacts()` - Conta bloqueados
- [ ] `getOptInRate()` - Calcula % opt-in
- [ ] `getOptOutRate()` - Calcula % opt-out
- [ ] `getInactiveContacts()` - Conta inativos

### **Parte 2: Layout**
- [ ] Escolher layout (2 colunas recomendado)
- [ ] Adicionar card de distribui√ß√£o geogr√°fica
- [ ] Adicionar card de status de consentimento
- [ ] Adicionar gr√°fico pizza visual
- [ ] Adicionar estat√≠sticas detalhadas

### **Parte 3: Visual**
- [ ] Cores verde/vermelho para opt-in/out
- [ ] √çcones adequados (‚úÖ ‚ùå üì©)
- [ ] Responsividade mobile
- [ ] Alerta de audi√™ncia dispon√≠vel

### **Parte 4: Testes**
- [ ] Testar com 0 contatos
- [ ] Testar com 100% opt-in
- [ ] Testar com 100% opt-out
- [ ] Testar com mix de estados
- [ ] Verificar c√°lculo das porcentagens

---

## üéØ **BENEF√çCIOS DA COMBINA√á√ÉO**

| Indicador | Benef√≠cio |
|-----------|-----------|
| **Geografia** | Saber onde est√£o os contatos |
| **Opt-in/out** | Compliance LGPD + Audi√™ncia real |
| **Combinado** | Planejar campanhas por regi√£o E saber quantos podem receber |

### **Exemplo Pr√°tico:**
```
SP tem 150 contatos
Desses, 140 s√£o opt-in (93%)
Ent√£o posso fazer campanha em SP para 140 pessoas
```

---

## üì± **RESPONSIVIDADE**

```tsx
// Mobile: Cards empilhados verticalmente
<div className="grid grid-cols-1 lg:grid-cols-2 gap-4">

// Desktop: 2 colunas lado a lado
// Mobile: 1 coluna, geografia em cima, opt-in embaixo
```

---

## üöÄ **PR√ìXIMAS EVOLU√á√ïES**

1. **Filtro Combinado:** Clicar em "SP + Opt-in" mostra s√≥ esses
2. **Trend:** Mostrar evolu√ß√£o de opt-out ao longo do tempo
3. **Alerta:** Avisar se taxa de opt-out subir muito
4. **Export Segmentado:** Exportar "SP + Opt-in" direto
5. **Mapa Visual:** SVG do Brasil colorido por densidade

---

## üìö **REFER√äNCIAS**

- **Arquivo:** `frontend/src/pages/ContactsPage.tsx`
- **Linha de inser√ß√£o:** Ap√≥s linha 281 (ap√≥s stats atuais)
- **Interface Contact:** J√° tem campos `opted_out` e `is_active`
- **LGPD:** Opt-out √© obrigat√≥rio por lei no Brasil

---

## üé® **PREVIEW VISUAL ASCII**

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üìä INDICADORES AVAN√áADOS                                ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë üìç GEOGRAFIA               ‚ïë ‚úÖ CONSENTIMENTO            ‚ïë
‚ïë ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚ïë ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚ïë
‚ïë 3 estados | 2 sem UF       ‚ïë LGPD Compliance             ‚ïë
‚ïë                            ‚ïë                             ‚ïë
‚ïë SP    150 (45%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë  ‚ïë      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚ïë
‚ïë RJ    100 (30%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  ‚ïë      ‚îÇ  91.4%  ‚îÇ üéØ         ‚ïë
‚ïë MG     50 (15%) ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚ïë      ‚îÇ  opt-in ‚îÇ            ‚ïë
‚ïë N/A    30 (9%)  ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚ïë      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚ïë
‚ïë                            ‚ïë                             ‚ïë
‚ïë                            ‚ïë ‚úÖ Opt-in:  320 contatos    ‚ïë
‚ïë                            ‚ïë ‚ùå Opt-out:  30 contatos    ‚ïë
‚ïë                            ‚ïë                             ‚ïë
‚ïë                            ‚ïë üì© 320 aptos p/ campanhas   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

**‚úÖ PROMPT COMPLETO - INDICADORES COMBINADOS PRONTOS!**



