â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ VARIÃVEIS DE AMBIENTE - RAILWAY BACKEND (ATUALIZADO)
Data: 27 de Outubro de 2025 - Tarde
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INSTRUÃ‡Ã•ES:
1. Railway Dashboard â†’ Backend Service â†’ Variables
2. Clicar em "Raw Editor" (modo texto)
3. Copiar o conteÃºdo abaixo (linhas 13-43)
4. Colar no Raw Editor (substitui tudo)
5. Salvar â†’ Railway faz redeploy automÃ¡tico

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AI_EMBEDDING_MODEL="qwen-mini-embeddings"
AI_MODEL_NAME="qwen-local"
N8N_AI_WEBHOOK=""
DEBUG="False"
SECRET_KEY="N;.!iB5@sw?D2wJPr{Ysmt5][R%5.aHyAuvNpM_@DOb:OX*<.f"
LOG_FORMAT="json"
LOG_LEVEL="INFO"
ALLOWED_HOSTS="alreasense-backend-production.up.railway.app,localhost,127.0.0.1"
CORS_ALLOWED_ORIGINS="https://alreasense-production.up.railway.app"
CSRF_TRUSTED_ORIGINS="https://alreasense-production.up.railway.app"
ALLOW_ALL_WEBHOOK_ORIGINS="true"
DATABASE_URL="postgresql://postgres:wDxByyoBGIzFwodHccWSkeLmqCcuwpVt@postgres-59a0986d.railway.internal:5432/railway"
REDIS_URL="redis://default:AJSfSJmpfWSdYZxSIfLyjPTsdDyUULsu@redis-3bz0.railway.internal:6379"
CHANNELS_REDIS_URL="redis://default:AJSfSJmpfWSdYZxSIfLyjPTsdDyUULsu@redis-3bz0.railway.internal:6379"
RABBITMQ_URL="amqp://75jkOdrEEjQmQLFs3:VZgIFDdCNzemdc3ToXzbLqeNhc3lluvk@shinkansen.proxy.rlwy.net:30709"
RABBITMQ_PRIVATE_URL="amqp://75jkOdrEEjQmQLFs3:VZgIFDdCNzemdc3ToXzbLqeNhc3lluvk@rabbitmq.railway.internal:5672"
RABBITMQ_DEFAULT_USER="75jkOdrEEjQmQLFs3"
RABBITMQ_DEFAULT_PASS="VZgIFDdCNzemdc3ToXzbLqeNhc3lluvk"
RABBITMQ_NODENAME="rabbit@rabbitmq"
EVO_BASE_URL="https://evo.rbtec.com.br"
EVO_API_KEY="E2413B31-B12C-46ED-ACA0-7EBCA8596A08"
STRIPE_PUBLISHABLE_KEY=""
STRIPE_SECRET_KEY=""
STRIPE_WEBHOOK_SECRET=""

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… MUDANÃ‡AS APLICADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”„ ATUALIZADAS (Novas credenciais RabbitMQ):
- RABBITMQ_URL (proxy externo, porta 30709)
- RABBITMQ_PRIVATE_URL (âœ… INTERNAL - melhor performance!)
- RABBITMQ_DEFAULT_USER (75jkOdrEEjQmQLFs3 - com O maiÃºsculo)
- RABBITMQ_DEFAULT_PASS (VZgIFDdCNzemdc3ToXzbLqeNhc3lluvk - SEM ~)

â• ADICIONADA:
- RABBITMQ_NODENAME (gerada automaticamente pelo Railway)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ POR QUE VAI FUNCIONAR AGORA?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… RABBITMQ_PRIVATE_URL existe e estÃ¡ completa (92 chars)
âœ… Senha SEM caractere ~ (tilde) problemÃ¡tico
âœ… CÃ³digo prioriza RABBITMQ_PRIVATE_URL (mais rÃ¡pido)
âœ… User correto: 75jkOdrEEjQmQLFs3 (com O maiÃºsculo, nÃ£o zero)
âœ… Pass correto: VZgIFDdCNzemdc3ToXzbLqeNhc3lluvk (32 chars)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š LOGS ESPERADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” [DEBUG] RABBITMQ_PRIVATE_URL env: amqp://75jkOdrEEjQmQLFs3:******@rabbitmq.railway.internal:5672
âœ… [SETTINGS] Usando RABBITMQ_PRIVATE_URL (internal - recomendado)
âœ… [SETTINGS] RABBITMQ_URL final: amqp://***:***@rabbitmq.railway.internal:5672
âœ… [SETTINGS] RABBITMQ_URL length: 92 chars

ğŸš€ [RABBITMQ] RabbitMQ Consumer (aio-pika) inicializado em background...
âœ… [RABBITMQ] Consumer pronto para processar campanhas!

ğŸš€ [FLOW CHAT] Iniciando Flow Chat Consumer...
âœ… [CHAT CONSUMER] ConexÃ£o RabbitMQ estabelecida com sucesso!
âœ… [CHAT CONSUMER] Channel criado com sucesso!
âœ… [CHAT CONSUMER] Filas declaradas
âœ… [FLOW CHAT] Consumer pronto para processar mensagens!

âŒ NÃƒO DEVE APARECER:
- ACCESS_REFUSED
- ERRO DE AUTENTICAÃ‡ÃƒO RABBITMQ
- "RABBITMQ_URL length: 87 chars" (era o bug anterior)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ NOTAS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Railway regenerou TODAS as credenciais RabbitMQ
2. Credenciais antigas (~CiJnJU1I...) NÃƒO funcionam mais
3. Novas credenciais (VZgIFDdCNzemdc3...) sÃ£o mais seguras
4. RABBITMQ_PRIVATE_URL Ã© melhor que RABBITMQ_URL (comunicaÃ§Ã£o interna)
5. Ambos consumers (Campaigns + Chat) vÃ£o usar as mesmas credenciais

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” COMPARAÃ‡ÃƒO: ANTES vs DEPOIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES (Credenciais Antigas):
- User: 75jk0mkcjQmQLFs3 (com zero)
- Pass: ~CiJnJU1I-1k~GS.vRf4qj8-EqeurdvJ (34 chars, com ~)
- Status: âŒ Truncamento â†’ ACCESS_REFUSED

DEPOIS (Credenciais Novas):
- User: 75jkOdrEEjQmQLFs3 (com O maiÃºsculo)
- Pass: VZgIFDdCNzemdc3ToXzbLqeNhc3lluvk (32 chars, SEM ~)
- Status: âœ… Completa â†’ Funcionando!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â±ï¸ TEMPO ESTIMADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- Copiar/Colar: ~30 segundos
- Railway Redeploy: ~3-5 minutos
- Total: ~5-6 minutos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ApÃ³s aplicar, aguardar o deploy e verificar os logs! ğŸš€

